<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTO Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 <mapper namespace="com.chun.springpt.dao.SignUpDao">
     <insert id="insertMembers">
        INSERT ALL
    INTO members (ID, EMAIL, PASSWORD, NAME, GENDER, ROLE, BIRTH)
       VALUES (#{id}, #{email}, #{password}, #{name}, #{gender}, #{role}, #{birth})
    INTO normal_mem (NNUM, NORMAL_ID, WEIGHT, HEIGHT, PURPOSE, ACTIVITY, NICKNAME, TARGET_WEIGHT, NM_PROFILEIMG)
          VALUES (normal_mem_seq.nextVal, #{id}, #{weight}, #{height}, #{purpose}, #{activity}, #{nickname}, #{TARGET_WEIGHT}, #{NM_PROFILEIMG})
    SELECT * FROM dual
    </insert>
    <select id="validCheckEmail" resultType="int">
        select count(*) from members where email = #{email}
    </select>
    <select id="validCheckId" resultType="int">
        select count(*) from members where id = #{id}
    </select>

 </mapper>